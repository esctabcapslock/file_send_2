<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>파일</title>
</head>
<body>
   <h3>보내기</h3>
    <form action="./file" method="POST"  enctype="multipart/form-data">
        <input type="file"  multiple name="name">
        <input type="text" name='text' value="">
        <input type="submit" value="전송">
    </form>
    
    <div>
         <input type="file" id='ff' multiple name="name">
        <button id='fff'>전송(다중)</button>
        
    </div>
    <br>
    <h3>받기 <button onclick='reload()'>목록 새로고침</button></h3>
    <div id="list"></div>
    <script>
    function reload(){
    fetch('./html').then((응답)=>{
        return 응답.text();
    }).then((Data)=>{
        //console.log('data',Data);
        document.getElementById("list").innerHTML=Data;
    })
    }
    reload();
    </script>
    
    
    <script>
        document.getElementById('fff').addEventListener('click',(e)=>{
            const filse = document.getElementById('ff').files
            for(var i=0; i<filse.length; i++){
                var formdata = new FormData();
                formdata.append('name', filse[i]);
                
                fetch('./file/',{
                    method: 'POST',
                    body: formdata
                }).then((응답)=>{
                    return 응답.text();
                }).then((Data)=>{
                    console.log('data',Data);
                    //document.getElementById("list").innerHTML=Data;
                });
                }
            })
        
    
    </script>
</body>
</html>